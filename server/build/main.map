{"version":3,"sources":["webpack:///webpack/bootstrap 4f74196baf62a1be8cd7","webpack:///external \"mongoose\"","webpack:///external \"express\"","webpack:///./config/keys.js","webpack:///./src/index.js","webpack:///external \"cors\"","webpack:///external \"body-parser\"","webpack:///external \"passport\"","webpack:///./config/passport.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///external \"passport-jwt\"","webpack:///./src/routes/cours.js","webpack:///./src/models/Cours.js","webpack:///external \"multer\"","webpack:///./src/routes/user.js","webpack:///./src/models/User.js","webpack:///external \"gravatar\"","webpack:///external \"bcryptjs\"","webpack:///external \"jsonwebtoken\""],"names":["module","exports","mongoURI","secretOrKey","PORT","process","env","app","express","mongoose","connect","useNewUrlParser","db","connection","on","console","error","bind","once","log","use","passport","initialize","config","bodyParser","urlencoded","extended","json","cors","listen","JwtStrategy","Jwt","Strategy","ExtractJwt","Extract","opts","jwtFormRequest","fromAuthHeaderAsBearerToken","keys","jwt_payload","done","coursRouter","Router","storage","multer","diskStorage","destination","req","file","cb","filename","Date","now","originalname","upload","get","res","Cours","find","err","cours","post","single","newFilm","body","img","save","film","redirect","title","author","findByIdAndUpdate","params","id","idParams","_id","findByIdAndRemove","findById","cour","Schema","coursSchema","type","String","required","years","model","userRouter","msg","User","findOne","email","then","user","status","avatar","gravatar","url","s","r","d","newUser","name","password","bcrypt","genSalt","salt","hash","catch","compare","isMatch","payload","jwt","sign","expiresIn","token","success","authenticate","userSchema","date","default"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4f74196baf62a1be8cd7","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 1\n// module chunks = 0","module.exports =  {\n    mongoURI : 'mongodb://localhost:27017/mern_lvl1',\n    secretOrKey : \"secret\"\n};\n\n\n// WEBPACK FOOTER //\n// ./config/keys.js","import express from \"express\";\nimport mongoose from \"mongoose\";\nimport cors from \"cors\";\nimport bodyParser from \"body-parser\";\nimport passport from \"passport\";\n\n\nimport {mongoURI} from \"../config/keys\";\nconst PORT = process.env.PORT || 4000;\nconst app = express();\n\nmongoose.connect(mongoURI, { useNewUrlParser: true });\nconst db = mongoose.connection;\ndb.on('error', console.error.bind(console, 'connection error:'));\ndb.once('open', function () {\n    console.log('Connecté a MongoDB !')\n});\n\n// Passport Middleware\napp.use(passport.initialize());\n\n//Passport Config \n// require(\"../config/passport\")(passport);\nimport * as config from '../config/passport'\nconfig(passport)\n// const configPassport = require(\"../config/passport\")(passport)\n\n// parse application/json\napp.use(bodyParser.urlencoded({extended: true}));\napp.use(bodyParser.json())\napp.use(express());\napp.use(cors());\n\n// Route\nimport coursRouter from \"./routes/cours\";\nimport userRouter from \"./routes/user\";\napp.use('/cours', coursRouter);\napp.use('/users', userRouter);\n\napp.listen(PORT, () => {\n    console.log(`Le serveur ${PORT} tourne !`)\n})\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cors\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 7\n// module chunks = 0","// const JwtStrategy = require(\"passport-jwt\").Strategy;\nimport Jwt from 'passport-jwt'\nconst JwtStrategy = Jwt.Strategy\n\n// const ExtractJwt = require(\"passport-jwt\").ExtractJwt;\nimport Extract from \"passport-jwt\";\nconst ExtractJwt = Extract.ExtractJwt;\n\nimport mongoose from \"mongoose\";\n// const User = mongoose.model(\"user\");\n\nimport keys from \"./keys\";\n\nconst opts = {};\nopts.jwtFormRequest = ExtractJwt.fromAuthHeaderAsBearerToken();\nopts.secretOrKey = keys.secretOrKey;\n\nmodule.exports = (passport) => {\n    passport.use(new JwtStrategy(opts, (jwt_payload, done) => {\n        console.log(jwt_payload)\n    }));\n}\n\n\n// WEBPACK FOOTER //\n// ./config/passport.js","module.exports = function(originalModule) {\r\n\tif(!originalModule.webpackPolyfill) {\r\n\t\tvar module = Object.create(originalModule);\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"exports\", {\r\n\t\t\tenumerable: true,\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/harmony-module.js\n// module id = 9\n// module chunks = 0","module.exports = require(\"passport-jwt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-jwt\"\n// module id = 10\n// module chunks = 0","import express from \"express\";\nimport {Cours} from \"../models/Cours\";\nimport multer from \"multer\";\n\nconst coursRouter = express.Router();\n\nvar storage = multer.diskStorage({\n    destination: function (req, file, cb) {\n      cb(null, '../public/uploads/')\n    },\n    filename: function (req, file, cb) {\n      cb(null, Date.now() + '-' + file.originalname )\n    }\n  })\n  \n  var upload = multer({ storage: storage });\n\n\n// All Cours\ncoursRouter.get(\"/\", (req, res) => {\n    Cours.find({}, (err, cours) => {\n        if(err) console.log(err);\n        res.json(cours)\n    })\n});\n\n\n// Add Cours\ncoursRouter.post('/add', upload.single('img'),(req, res) => {\n    const newFilm = new Cours(req.body)\n    newFilm.img = req.file.filename\n    newFilm.save((err, film) => {\n        if (err) return console.log(err)\n        res.redirect(\"http://localhost:3000/cours\")\n    });\n});\n\n// Edit Cours // Img Multer not work\ncoursRouter.post('/edit/:id', upload.single('img'), (req, res) => {\n    let body = {\n        title: req.body.title,\n        author: req.body.author,\n        body : req.body.body,\n        img: req.file.filename\n    };\n    Cours.findByIdAndUpdate(req.params.id ,body ,(err, film) => {\n        if (err) return console.log(err)\n        res.redirect(\"http://localhost:3000/cours\")\n    });\n});\n\n// Delete Cours\ncoursRouter.get(\"/delete/:id\", (req, res) => {\n    let idParams = {_id: req.params.id};\n    Cours.findByIdAndRemove(idParams, (err) => {\n        if (err) console.log(err)\n        res.redirect(\"http://localhost:3000/cours\");\n    })\n})\n\n// Single Cours\ncoursRouter.get(\"/:id\", (req, res) => {\n    Cours.findById({_id: req.params.id}, (err, cour) => {\n        if(err) return console.log(err);\n        res.json(cour)\n    })\n});\n\nexport default coursRouter;\n\n\n// WEBPACK FOOTER //\n// ./src/routes/cours.js","import mongoose from \"mongoose\";\n\nconst Schema = mongoose.Schema;\n\nconst coursSchema = new Schema({\n    title: {type: String, required: true},\n    author : { type: String},\n    years: {type : Date, \"default\": Date.now},\n    body: {type: String, required: true},\n    img: {type: String}\n})\n\nconst Cours = mongoose.model(\"cours\", coursSchema)\n\nexport { Cours };\n\n\n// WEBPACK FOOTER //\n// ./src/models/Cours.js","module.exports = require(\"multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multer\"\n// module id = 14\n// module chunks = 0","import express from \"express\";\nimport {\n    User\n} from \"../models/User\";\nimport gravatar from \"gravatar\";\nimport bcrypt from \"bcryptjs\";\nimport jwt from \"jsonwebtoken\";\nimport passport from \"passport\";\n// Import object\nimport keys from \"../../config/keys\"\n\n\nconst userRouter = express.Router();\n\n\nuserRouter.get(\"/\", (req, res) => {\n    res.json({\n        msg: \"User works\"\n    })\n});\n\n\n// Register user\n// localhost://users/register   \nuserRouter.post(\"/register\", (req, res) => {\n    User.findOne({\n            email: req.body.email\n        })\n        .then(user => {\n            if (user) {\n                return res.status(400).json({\n                    email: \"L'email existe deja !\"\n                })\n            } else {\n                const avatar = gravatar.url(req.body.email, {\n                    s: \"200\", // size\n                    r: \"pg\", // Rating\n                    d: \"mm\" // Default\n                })\n\n                const newUser = new User({\n                    name: req.body.name,\n                    email: req.body.email,\n                    avatar: avatar,\n                    password: req.body.password\n                });\n\n                // HAsh Password\n                bcrypt.genSalt(10, (err, salt) => {\n                    bcrypt.hash(newUser.password, salt, (err, hash) => {\n                        if (err) console.log(err);\n                        newUser.password = hash;\n                        newUser.save()\n                            .then(user => res.json(user))\n                            .catch(err => console.log(err))\n                    })\n                })\n            }\n        })\n});\n\n// Login user\n// localhost://users/login\nuserRouter.post(\"/login\", (req, res) => {\n    const email = req.body.email;\n    const password = req.body.password;\n\n    // Find user by email\n    User.findOne({\n            email: email\n        })\n        .then(user => {\n            // Check the user\n            if (!user) {\n                return res.status(404).json({\n                    email: \"L'email n'existe pas !\"\n                })\n            }\n\n            // Check password \n            bcrypt.compare(password, user.password)\n                .then(isMatch => {\n                    if (isMatch) {\n                        // User Match\n                        const payload = {\n                            id: user.id,\n                            name: user.name,\n                            avatar: user.avatar\n                        } // Creation du JWT Payload\n                        //Sign Token\n                        jwt.sign(payload, keys.secretOrKey, {\n                            expiresIn: 3600\n                        }, (err, token) => {\n                            res.json({\n                                success: true,\n                                token: \"Bearer \" + token\n                            })\n                        });\n                    } else {\n                        return res.status(400).json({\n                            password: \"Password incorrect\"\n                        })\n                    }\n                })\n        });\n});\n\n// Get users/current\n// Return Current User\nuserRouter.get(\"/current\", passport.authenticate(\"jwt\"))\n\n\nexport default userRouter;\n\n\n// WEBPACK FOOTER //\n// ./src/routes/user.js","import mongoose from \"mongoose\";\n\nconst Schema = mongoose.Schema;\n\nconst userSchema = new Schema({\n    name: {type: String, required: true},\n    email : { type: String, required: true},\n    password: {type : String, required: true},\n    avatar: {type: String},\n    date: {type: Date, default: Date.now}\n})\n\nconst User = mongoose.model(\"user\", userSchema)\n\nexport { User };\n\n\n// WEBPACK FOOTER //\n// ./src/models/User.js","module.exports = require(\"gravatar\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"gravatar\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"bcryptjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcryptjs\"\n// module id = 18\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 19\n// module chunks = 0"],"sourceRoot":""}